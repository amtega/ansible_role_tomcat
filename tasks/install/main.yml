---
# Install tasks

- block:
    - import_tasks: "{{ role_path }}/tasks/install/packages.yml"
    - import_tasks: "{{ role_path }}/tasks/install/groups.yml"
    - import_tasks: "{{ role_path }}/tasks/install/users.yml"
    - import_tasks: "{{ role_path }}/tasks/install/server.yml"
    - import_tasks: "{{ role_path }}/tasks/install/instances.yml"
    - import_tasks: "{{ role_path }}/tasks/install/catalina.yml"
    - import_tasks: "{{ role_path }}/tasks/install/daemon.yml"
  vars:
    instance_base: >-
      {{ instance.base
         | default(tomcat_instance_base
                   + "/"
                   + instance.name) }}
    instance_home: >-
      {{ instance.home
         | default(tomcat_instance_home
                   + "/apache-tomcat-"
                   + instance.version) }}
  tags:
    - role::tomcat
    - role::tomcat::install
