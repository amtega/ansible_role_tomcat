- Manager:
    className: org.apache.catalina.ha.session.DeltaManager
    expireSessionsOnShutdown: "{{ instance.cluster_expire_sessions_on_shutdown | default(tomcat_instance_cluster_expire_sessions_on_shutdown) }}"
    notifyListenersOnReplication: "{{ instance.cluster_notify_listeners_on_replication | default(tomcat_instance_cluster_notify_listeners_on_replication) }}"

- Channel:
    className: org.apache.catalina.tribes.group.GroupChannel
    _:
      - Membership:
          className: org.apache.catalina.tribes.membership.McastService
          address: "{{ instance.cluster_mcast_address | default(tomcat_instance_cluster_mcast_address) }}"
          port: "{{ instance.cluster_mcast_port | default(tomcat_instance_cluster_mcast_port) }}"
          frequency: "{{ instance.cluster_mcast_frequency | default(tomcat_instance_cluster_mcast_frequency) }}"
          dropTime: "{{ instance.cluster_mcast_droptime | default(tomcat_instance_cluster_mcast_droptime) }}"

      - Sender:
          className: org.apache.catalina.tribes.transport.ReplicationTransmitter
          _:
            - Transport:
                className: org.apache.catalina.tribes.transport.nio.PooledParallelSender

      - Receiver:
          className: org.apache.catalina.tribes.transport.nio.NioReceiver
          address: "{{ instance.cluster_nio_address | default(tomcat_instance_cluster_nio_address) }}"
          port: "{{ instance.cluster_nio_port | default(tomcat_instance_cluster_nio_port) }}"
          autoBind: "{{ instance.cluster_nio_autobind | default(tomcat_instance_cluster_nio_autobind) }}"
          selectorTimeout: "{{ instance.cluster_nio_selector_timeout | default(tomcat_instance_cluster_nio_selector_timeout) }}"
          maxThreads: "{{ instance.cluster_nio_max_threads | default(tomcat_instance_cluster_nio_max_threads) }}"

      - Interceptor:
          className: org.apache.catalina.tribes.group.interceptors.TcpFailureDetector

      - Interceptor:
          className: org.apache.catalina.tribes.group.interceptors.MessageDispatchInterceptor

- Valve:
    className: org.apache.catalina.ha.tcp.ReplicationValve
    filter: ""

- Valve:
    className: org.apache.catalina.ha.session.JvmRouteBinderValve

- Deployer:
    className: org.apache.catalina.ha.deploy.FarmWarDeployer
    tempDir: "{{ instance.cluster_deploy_temp_dir | default(tomcat_instance_cluster_deploy_temp_dir) }}"
    deployDir: "{{ instance.cluster_deploy_dir | default(tomcat_instance_cluster_deploy_dir) }}"
    watchDir: "{{ instance.cluster_deploy_watch_dir | default(tomcat_instance_cluster_deploy_watch_dir) }}"
    watchEnabled: "{{ instance.cluster_deploy_watch_enabled | default(tomcat_instance_cluster_deploy_watch_enabled) }}"

- ClusterListener:
    className: org.apache.catalina.ha.session.ClusterSessionListener
