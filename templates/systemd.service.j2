{{ ansible_managed | comment }}
[Unit]
Description=Tomcat instance {{ tomcat_instance_name }}
After=network.target

[Service]
Type=forking
PIDFile={{ tomcat_instance_base }}/{{ tomcat_instance_pid_file }}
User={{ tomcat_instance_user }}
Group={{tomcat_instance_group }}
Restart=on-failure
{% if tomcat_instance_use_native_daemon
      and tomcat_instance_version is version("7", ">=") %}
Environment=JAVA_HOME={{ tomcat_instance_java_home }}
Environment=CATALINA_HOME={{ tomcat_instance_home }}
Environment=CATALINA_BASE={{ tomcat_instance_base }}
ExecStart={{ tomcat_instance_base }}/bin/daemon.sh start
ExecStop={{ tomcat_instance_base }}/bin/daemon.sh stop
{% else %}
ExecStart={{ tomcat_instance_base }}/bin/startup.sh
ExecStop={{ tomcat_instance_base }}/bin/shutdown.sh
{% endif %}
TimeoutStartSec=30
TimeoutStopSec=30
SuccessExitStatus=143

[Install]
WantedBy=multi-user.target
