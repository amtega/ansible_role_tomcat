---
# Role variables

# Supported distributions

tomcat_supported_distributions:
  - centos
  - fedora
  - rhel

# Supported distributions versions

tomcat_supported_versions:
  centos: 6
  fedora: 27
  rhel: 6

# Required operating system packages

tomcat_packages:
  centos_6:
    - gcc
    - java
    - java-devel
    - libcap-devel
    - libxml2-devel
    - libxml2-python
    - libxslt-devel
    - libxslt-python
    - make
    - python-devel
    - python-pip
    - rsync
    - tar
  centos_7:
    - gcc
    - java
    - java-devel
    - libcap-devel
    - make
    - python-lxml
    - rsync
    - tar
    - unzip
  fedora_27:
    - gcc
    - java
    - java-devel
    - libcap-devel
    - make
    - python-lxml
    - rsync
    - tar
    - unzip
  fedora_28:
    - gcc
    - java
    - java-devel
    - libcap-devel
    - make
    - python-lxml
    - rsync
    - tar
    - unzip
  rhel_6:
    - gcc
    - java
    - java-devel
    - libcap-devel
    - make
    - python-lxml
    - rsync
    - tar
    - unzip
  rhel_7:
    - gcc
    - java
    - java-devel
    - libcap-devel
    - make
    - python-lxml
    - rsync
    - tar
    - unzip

# Required python pip packages

tomcat_packages_python:
  centos_6:
    - lxml

# Permissions to use in tomcat directories and files

tomcat_files_permissions: "u=rwx,go=rx"

# Config files paths (relative to tomcat base)

tomcat_server_config: conf/server.xml
tomcat_users_config: conf/tomcat-users.xml
tomcat_manager_config: conf/Catalina/localhost/manager.xml
tomcat_limits_config: /etc/security/limits.d

# Tomcat instances subdirs

tomcat_instance_subdirs:
  - bin
  - conf
  - lib
  - logs
  - temp
  - webapps
  - work
  - "{{ tomcat_manager_config | dirname }}"

# Tomcat instance subdirectories to populate

tomcat_instance_subdirs_to_populate:
  - conf
  - webapps/manager
  - webapps/manager
  - webapps/examples
  - webapps/docs
  - webapps/ROOT

# Startup scripts

tomcat_catalina_scripts:
  - bin/catalina.sh
  - bin/startup.sh
  - bin/shutdown.sh

tomcat_daemon_scripts:
  - bin/daemon.sh

# Systemd variables

tomcat_systemd_services_path: /usr/lib/systemd/system

# System V init variables

tomcat_systemv_init_path: /etc/init.d

# Proxy environment settings

tomcat_http_proxy_config:
    http_proxy: "{{ tomcat_http_proxy | default('') }}"
    https_proxy: "{{ tomcat_https_proxy | default('') }}"
    http_no_proxy: "{{ tomcat_no_proxy | default('') }}"

tomcat_http_proxy_environment: >-
  {{ (tomcat_http_proxy is defined
      or tomcat_https_proxy is defined
      or tomcat_no_proxy is defined)
     | ternary(tomcat_http_proxy_config, {}) }}
